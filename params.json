{"name":"Waterfall","tagline":"瀑布流插件实现（需要jqeury支持）","body":"# waterfall\r\n瀑布流插件实现\r\n\r\n***注：需要jquery支持。ie8+，chrome，FF等主流浏览器皆可***\r\n\r\n\r\n###使用方法：\r\n提取`waterfall/public/javascripts/waterfall.js`作为插件。[这里](https://github.com/HarryFight/waterfall/blob/master/public/javascripts/waterfall.js)\r\n\r\n`waterfall/views/index.ejs`为插件演示的html文件。[这里](https://github.com/HarryFight/waterfall/blob/master/views/index.ejs)\r\n\r\n\r\n插件调用方式：\r\n\r\n```javascript\r\nvar waterfall = new Waterfall({\r\n            colums:[200,200,200,200],\r\n            marginRight:20,\r\n            marginBottom:40,\r\n            container:$(\"#waterfall-container\"),\r\n            loadUrl:\"./getImg\",\r\n            maxLoad:100\r\n        });\r\n```\r\n插件缺省配置：\r\n```javascript\r\n var DEFAULT_OPT = {\r\n        container:'#waterfall-container',\r\n        colums:[200,200,200,200],\r\n        marginRight:20,\r\n        marginBottom:20,\r\n        loadUrl:'./getImg',\r\n        maxLoad:200\r\n    };\r\n```\r\n\r\n###实现思路：\r\n1、插件构造函数初始化\r\n\r\n2、initColums初始化，计算每一列的位置，初始化列高\r\n\r\n3、注册scroll事件，触发后loadImgs\r\n\r\n4、使用ajax获取数据json\r\n\r\n5、使用render渲染获取到的数据\r\n\r\n6、getMin获取最优可添加item节点的列\r\n\r\n7、渲染时，添加dom节点。首先遍历数据，生成html字符并且产生dom节点，通过比较每列高度，优先添加到最低高度的列上\r\n\r\n8、细节优化（比如限制加载数量等）。\r\n\r\n###小结：\r\n源文件中waterfall对象的原型中有关于节点复用的部分，此部分尚未完善，在以后有想法后会慢慢补充完成。\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}